<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:do="clr-namespace:Hymperia.Facade.DependencyObjects">
  <Style x:Key="NumericTextBox" TargetType="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}">
    <Setter Property="do:MaskingBehavior.Mask" Value="[+-]?\d+([.,]\d*)?([Ee][+-]?\d+)?" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate>
          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition />
              <ColumnDefinition Width="5" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
              <RowDefinition Height="*" />
              <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <ContentPresenter Grid.Column="0" Grid.RowSpan="2" />
            <Button Command="{TemplateBinding (do:NumericTextBoxBehavior.UpCommand)}"
                CommandParameter="{TemplateBinding (do:NumericTextBoxBehavior.UpCommandParameter)}" Content="+"
                Grid.Column="1" Grid.Row="0" />
            <Button Command="{TemplateBinding (do:NumericTextBoxBehavior.DownCommand)}"
                CommandParameter="{TemplateBinding (do:NumericTextBoxBehavior.DownCommandParameter)}" Content="+"
                Grid.Column="1" Grid.Row="0" />
          </Grid>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>